# Architecture Visualization

Автоматическая генерация координат для визуализации архитектурных решений PromAi PKM.

## Файлы

- `nodes.json` - исходные данные (29 критериев)
- `coordinate_generator.js` - генератор координат
- `nodes_*.json` - сгенерированные варианты раскладки
- `viewer_*.html` - просмотрщики для каждого варианта
- `index.html` - главная страница выбора вариантов

## Варианты раскладки

### 1. Grid Layout (Сетка)
- Равномерная сетка 5×6
- Компактное размещение
- Лучше для обзора всех критериев

### 2. Tree Layout (Дерево)
- Иерархическая структура
- Группировка по уровням
- Показывает зависимости

### 3. Circular Layout (Круг)
- Круговая раскладка
- Симметричное размещение
- Эстетичный вид

### 4. Force-Directed Layout
- Физическая симуляция
- Органичное распределение
- Естественные связи

## Использование

### Генерация новых координат

```bash
node coordinate_generator.js
```

Создаст 4 файла:
- `nodes_grid.json`
- `nodes_tree.json`
- `nodes_circular.json`
- `nodes_force.json`

### Просмотр

Откройте `index.html` в браузере или любой `viewer_*.html` напрямую.

### Управление

- **Колесо мыши** - зум
- **ЛКМ + перетаскивание** - панорамирование
- **Кнопка "Сброс"** - вернуть начальный вид
- **Кнопка "Центр"** - центрировать

## Добавление нового варианта

1. Добавьте функцию в `coordinate_generator.js`:

```javascript
function generateMyLayout(nodes) {
  // Ваша логика размещения
  return nodes;
}
```

2. Зарегистрируйте в `LAYOUTS`:

```javascript
const LAYOUTS = {
  // ...
  my: generateMyLayout
};
```

3. Запустите генератор
4. Создайте `viewer_my.html` на основе существующих
5. Добавьте карточку в `index.html`

## Структура nodes.json

```json
{
  "nodes": {
    "node-id": {
      "id": "node-id",
      "x": 500,
      "y": 100,
      "type": "question|critical|important|flexible|rejected",
      "title": "Заголовок",
      "description": "Описание",
      "details": "Детали",
      "children": ["child-id-1", "child-id-2"],
      "criteriaId": 1
    }
  },
  "compatibility": {
    "node1,node2": "объединить|переключать|невозможно"
  }
}
```

## Параметры генератора

В `coordinate_generator.js`:

```javascript
const PARAMS = {
  nodeWidth: 320,        // Ширина узла
  nodeHeight: 200,       // Высота узла
  horizontalGap: 400,    // Горизонтальный отступ
  verticalGap: 300,      // Вертикальный отступ
  canvasWidth: 12000,    // Ширина canvas
  canvasHeight: 8000     // Высота canvas
};
```

## Типы узлов

- `question` - вопрос (синий)
- `critical` - критичное решение (красный)
- `important` - важное решение (оранжевый)
- `flexible` - гибкое решение (зелёный)
- `rejected` - отклонённое решение (серый)

## Совместимость

Линии совместимости между решениями:
- `объединить` - можно использовать вместе (зелёный)
- `переключать` - можно переключаться (оранжевый)
- `невозможно` - несовместимы (красный)
