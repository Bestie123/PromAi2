<!DOCTYPE html>
<html>
<head>
    <title>Option 3: Dependency Graph</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .container { display: flex; gap: 20px; }
        .left-panel { flex: 1; }
        .right-panel { flex: 1; }
        .node { border: 2px solid #ccc; border-radius: 8px; padding: 10px; margin: 5px; display: inline-block; min-width: 80px; position: relative; }
        .foundation { background: #FFF3E0; border-color: #FF5722; }
        .core { background: #E8F5E8; border-color: #4CAF50; }
        .feature { background: #E3F2FD; border-color: #2196F3; }
        .weight { position: absolute; top: -8px; right: -8px; background: #f44336; color: white; border-radius: 50%; width: 20px; height: 20px; text-align: center; font-size: 12px; line-height: 20px; }
        .edge { margin: 5px 0; padding: 8px; background: #f5f5f5; border-radius: 4px; }
        .strong { border-left: 4px solid #4CAF50; }
        .medium { border-left: 4px solid #FF9800; }
        .weak { border-left: 4px solid #9E9E9E; }
        .track { margin: 10px 0; padding: 10px; border: 1px solid #ddd; border-radius: 4px; }
        .critical-path { background: #FFECB3; padding: 10px; border-radius: 4px; margin: 10px 0; }
        .bottleneck { box-shadow: 0 0 8px red; }
        .controls { margin-bottom: 20px; }
        button { margin: 5px; padding: 8px 16px; }
    </style>
</head>
<body>
    <h1>Option 3: Dependency Graph</h1>
    
    <div class="controls">
        <button onclick="showNodes()">Nodes</button>
        <button onclick="showEdges()">Edges</button>
        <button onclick="showCriticalPath()">Critical Path</button>
        <button onclick="showTracks()">Parallel Tracks</button>
        <button onclick="showRisks()">Risk Matrix</button>
        <button onclick="showAll()">All</button>
    </div>

    <div id="critical-path-container"></div>
    
    <div class="container">
        <div class="left-panel">
            <h3>Nodes</h3>
            <div id="nodes-container"></div>
        </div>
        
        <div class="right-panel">
            <h3>Edges</h3>
            <div id="edges-container"></div>
            
            <h3>Parallel Tracks</h3>
            <div id="tracks-container"></div>
        </div>
    </div>

    <script>
        let data = null;

        async function loadData() {
            const response = await fetch('option3_graph.json');
            data = await response.json();
            showAll();
        }

        function showNodes() {
            const container = document.getElementById('nodes-container');
            container.innerHTML = '';

            Object.entries(data.dependency_graph.nodes).forEach(([nodeId, node]) => {
                const nodeEl = document.createElement('div');
                nodeEl.className = `node ${node.type}`;
                
                if (data.bottlenecks.includes(parseInt(nodeId))) {
                    nodeEl.classList.add('bottleneck');
                }
                
                nodeEl.innerHTML = `
                    <div class="weight">${node.weight}</div>
                    <strong>Node ${nodeId}</strong><br>
                    <small>${node.type}</small>
                `;
                
                container.appendChild(nodeEl);
            });
        }

        function showEdges() {
            const container = document.getElementById('edges-container');
            container.innerHTML = '';

            data.dependency_graph.edges.forEach(edge => {
                const edgeEl = document.createElement('div');
                edgeEl.className = `edge ${edge.strength}`;
                edgeEl.innerHTML = `
                    <strong>${edge.from} â†’ ${edge.to}</strong><br>
                    ${edge.type} | ${edge.strength}
                `;
                container.appendChild(edgeEl);
            });
        }

        function showCriticalPath() {
            const container = document.getElementById('critical-path-container');
            container.innerHTML = `
                <div class="critical-path">
                    <strong>ðŸ”¥ Critical Path:</strong> ${data.critical_path.join(' â†’ ')}
                </div>
            `;
        }

        function showTracks() {
            const container = document.getElementById('tracks-container');
            container.innerHTML = '';

            Object.entries(data.parallel_tracks).forEach(([trackName, nodes]) => {
                const trackEl = document.createElement('div');
                trackEl.className = 'track';
                trackEl.innerHTML = `
                    <strong>${trackName}:</strong><br>
                    ${nodes.join(', ')}
                `;
                container.appendChild(trackEl);
            });
        }

        function showRisks() {
            const container = document.getElementById('critical-path-container');
            container.innerHTML = `
                <div class="critical-path">
                    <strong>ðŸ”´ High Risk:</strong> ${data.risk_matrix.high.join(', ')}<br>
                    <strong>ðŸŸ¡ Medium Risk:</strong> ${data.risk_matrix.medium.join(', ')}<br>
                    <strong>ðŸŸ¢ Low Risk:</strong> ${data.risk_matrix.low.join(', ')}
                </div>
            `;
        }

        function showAll() {
            showNodes();
            showEdges();
            showCriticalPath();
            showTracks();
        }

        loadData();
    </script>
</body>
</html>