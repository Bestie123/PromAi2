<!DOCTYPE html>
<html>
<head>
    <title>Option 1: Enhanced JSON Dependencies</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .node { border: 2px solid #ccc; border-radius: 8px; padding: 10px; margin: 5px; display: inline-block; min-width: 150px; }
        .critical { border-color: #4CAF50; background: #E8F5E8; }
        .question { border-color: #2196F3; background: #E3F2FD; }
        .hard-dep { border-left: 5px solid #f44336; }
        .soft-dep { border-left: 5px solid #FF9800; }
        .blocking { box-shadow: 0 0 8px red; }
        .controls { margin-bottom: 20px; }
        button { margin: 5px; padding: 8px 16px; }
        .dep-info { font-size: 12px; color: #666; margin-top: 5px; }
        .order { background: #f5f5f5; padding: 10px; margin: 10px 0; border-radius: 4px; }
    </style>
</head>
<body>
    <h1>Option 1: Enhanced JSON Dependencies</h1>
    <p><strong>Подход:</strong> Расширенная JSON структура с типами зависимостей</p>
    
    <div class="controls">
        <button onclick="showHardDeps()">Hard Dependencies</button>
        <button onclick="showSoftDeps()">Soft Dependencies</button>
        <button onclick="showBlocking()">Blocking</button>
        <button onclick="showAll()">All</button>
        <button onclick="showOrder()">Development Order</button>
    </div>

    <div id="order-container"></div>
    <div id="nodes-container"></div>

    <script>
        let nodesData = null;

        async function loadData() {
            try {
                const response = await fetch('option1_enhanced_nodes.json');
                nodesData = await response.json();
                renderNodes();
            } catch (error) {
                console.error('Error loading data:', error);
                document.getElementById('nodes-container').innerHTML = '<p>Error loading data</p>';
            }
        }

        function renderNodes(filter = null) {
            const container = document.getElementById('nodes-container');
            container.innerHTML = '';

            Object.values(nodesData.nodes).forEach(node => {
                if (filter && !filter(node)) return;

                const nodeEl = document.createElement('div');
                nodeEl.className = `node ${node.type}`;
                
                if (node.dependency_type === 'hard') nodeEl.classList.add('hard-dep');
                if (node.dependency_type === 'soft') nodeEl.classList.add('soft-dep');
                if (node.blocking) nodeEl.classList.add('blocking');

                nodeEl.innerHTML = `
                    <div><strong>${node.title}</strong></div>
                    <div>${node.description || ''}</div>
                    <div class="dep-info">
                        Type: ${node.dependency_type || 'N/A'} |
                        ${node.blocking ? 'BLOCKING' : ''}
                        ${node.enables ? `<br>Enables: ${node.enables.join(', ')}` : ''}
                        ${node.enhances ? `<br>Enhances: ${node.enhances.join(', ')}` : ''}
                    </div>
                `;

                container.appendChild(nodeEl);
            });
        }

        function showHardDeps() {
            renderNodes(node => node.dependency_type === 'hard');
        }

        function showSoftDeps() {
            renderNodes(node => node.dependency_type === 'soft');
        }

        function showBlocking() {
            renderNodes(node => node.blocking);
        }

        function showAll() {
            renderNodes();
        }

        function showOrder() {
            const container = document.getElementById('order-container');
            container.innerHTML = `
                <div class="order">
                    <h3>Development Order:</h3>
                    ${nodesData.development_order.join(' → ')}
                </div>
            `;
        }

        loadData();
    </script>
</body>
</html>