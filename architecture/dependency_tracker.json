{
  "meta": {
    "version": "1.0.0",
    "updated": "2024-12-19",
    "description": "Dependency tracking for PromAi PKM architecture"
  },
  "development_order": {
    "phase1_foundation": {
      "priority": 1,
      "criteria": [1, 2, 3, 13],
      "nodes": ["modular-arch", "all-blocks", "uuid-v4", "yjs-crdt"],
      "description": "Несущие стены архитектуры",
      "blocks": [],
      "estimated_weeks": 4
    },
    "phase2_core": {
      "priority": 2,
      "criteria": [11, 12, 4, 7, 8],
      "nodes": ["declarative-ui", "zero-runtime", "nested-blocks", "refs-uuid", "backlinks-auto"],
      "description": "Основная функциональность",
      "depends_on": ["phase1_foundation"],
      "estimated_weeks": 6
    },
    "phase3_features": {
      "priority": 3,
      "criteria": [16, 21, 26, 9, 10],
      "nodes": ["crdt-only", "virtual-scrolling", "plugin-unified", "json-storage", "offline-full"],
      "description": "Ключевые возможности",
      "depends_on": ["phase2_core"],
      "estimated_weeks": 8
    },
    "phase4_polish": {
      "priority": 4,
      "criteria": [14, 15, 17, 18, 19, 20, 22, 23, 24, 25, 27, 28, 29],
      "description": "Доводка и оптимизация",
      "depends_on": ["phase3_features"],
      "estimated_weeks": 10
    }
  },
  "hard_dependencies": {
    "1": {
      "enables": [11, 12, 26, 29],
      "description": "Модульность enables UI, плагины, код"
    },
    "2": {
      "enables": [4, 7, 8, 16, 18, 19],
      "description": "Блоки enable структуру и ссылки"
    },
    "3": {
      "enables": [7, 8, 18],
      "description": "UUID enables ссылки"
    },
    "13": {
      "enables": [14, 16, 18, 25],
      "description": "CRDT enables операции и синхронизацию"
    },
    "11": {
      "enables": [12, 20, 21],
      "description": "Декларативный UI enables рендер"
    }
  },
  "soft_dependencies": {
    "21": {
      "enhances": [22],
      "description": "Virtual scrolling + Web Workers"
    },
    "26": {
      "enables": [27, 28],
      "description": "Плагины enable композиты и состояние"
    },
    "5": {
      "enhances": [6],
      "description": "Drag&Drop + Rich Text UX"
    }
  },
  "blocking_dependencies": {
    "foundation_blockers": [1, 2, 13],
    "ui_blockers": [11, 12],
    "data_blockers": [3, 9, 16],
    "description": "Критерии, блокирующие дальнейшую разработку"
  },
  "compatibility_matrix": {
    "impossible": [
      ["modular-arch", "monolith-arch"],
      ["declarative-ui", "imperative-ui"],
      ["all-blocks", "mixed-model"]
    ],
    "switchable": [
      ["uuid-v4", "uuid-v7"],
      ["yjs-crdt", "automerge-crdt"],
      ["json-storage", "sqlite-storage"]
    ],
    "combinable": [
      ["drag-drop-native", "drag-drop-lib"],
      ["markdown-rich", "wysiwyg-rich"],
      ["virtual-scrolling", "lazy-loading"]
    ]
  },
  "risk_assessment": {
    "high_risk": {
      "criteria": [13, 21, 26],
      "reason": "Сложная реализация, критично для производительности"
    },
    "medium_risk": {
      "criteria": [11, 12, 16],
      "reason": "Архитектурная сложность"
    },
    "low_risk": {
      "criteria": [3, 5, 6, 9, 10],
      "reason": "Стандартные решения"
    }
  },
  "validation_rules": {
    "required_before_phase2": [1, 2, 3, 13],
    "required_before_phase3": [11, 12],
    "required_before_phase4": [16, 21, 26],
    "never_together": ["modular-arch", "monolith-arch"]
  }
}