<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PromAi PKM - –ü–æ–ª–Ω–æ–µ –¥–µ—Ä–µ–≤–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #0d1117; color: #c9d1d9; overflow: hidden;
        }
        #canvas { 
            width: 8000px; height: 6000px; position: relative; 
            background: radial-gradient(circle at 50% 50%, #161b22 0%, #0d1117 100%);
            transform-origin: 0 0;
        }
        #viewport { 
            width: 100vw; height: 100vh; overflow: hidden; position: relative;
            cursor: grab; background: #0d1117;
        }
        #viewport.dragging { cursor: grabbing; }
        
        .node {
            position: absolute; background: #21262d; border: 2px solid #30363d;
            border-radius: 12px; padding: 16px; min-width: 280px; max-width: 320px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.4); transition: all 0.3s ease;
        }
        .node:hover { transform: scale(1.05); box-shadow: 0 12px 48px rgba(0,0,0,0.6); }
        
        .critical { border-color: #f85149; background: linear-gradient(135deg, #21262d 0%, #2d1b1f 100%); }
        .important { border-color: #f79009; background: linear-gradient(135deg, #21262d 0%, #2d2419 100%); }
        .flexible { border-color: #3fb950; background: linear-gradient(135deg, #21262d 0%, #1b2d1f 100%); }
        .question { border-color: #58a6ff; background: linear-gradient(135deg, #21262d 0%, #1b2332 100%); }
        .rejected { border-color: #8b949e; background: linear-gradient(135deg, #21262d 0%, #2d2d2d 100%); opacity: 0.7; }
        
        .badge {
            display: inline-block; padding: 4px 8px; border-radius: 6px; font-size: 11px;
            font-weight: bold; margin-bottom: 8px;
        }
        .badge.critical { background: #f85149; color: #fff; }
        .badge.important { background: #f79009; color: #fff; }
        .badge.flexible { background: #3fb950; color: #fff; }
        .badge.question { background: #58a6ff; color: #fff; }
        .badge.rejected { background: #8b949e; color: #fff; }
        
        .node h3 { font-size: 14px; margin-bottom: 8px; color: #f0f6fc; }
        .node p { font-size: 12px; line-height: 1.4; margin-bottom: 8px; color: #8b949e; }
        .details { font-size: 11px; color: #6e7681; }
        
        .connection {
            position: absolute; background: #30363d; height: 2px; transform-origin: left center;
            z-index: -1;
        }
        .connection.critical { background: #f85149; }
        .connection.important { background: #f79009; }
        .connection.flexible { background: #3fb950; }
        .connection.question { background: #58a6ff; }
        .connection.rejected { background: #8b949e; }
        
        .compatibility-line {
            transition: opacity 0.3s ease;
        }
        .compatibility-line:hover {
            opacity: 1 !important;
        }
        
        .controls {
            position: fixed; top: 20px; left: 20px; z-index: 1000;
            background: rgba(33, 38, 45, 0.9); padding: 12px; border-radius: 8px;
            border: 1px solid #30363d;
        }
        .controls button {
            background: #238636; color: #fff; border: none; padding: 8px 12px;
            border-radius: 6px; margin-right: 8px; cursor: pointer; font-size: 12px;
        }
        .controls button:hover { background: #2ea043; }
        
        .zoom-info {
            position: fixed; bottom: 20px; right: 20px; z-index: 1000;
            background: rgba(33, 38, 45, 0.9); padding: 8px 12px; border-radius: 6px;
            border: 1px solid #30363d; font-size: 12px;
        }
    </style>
</head>
<body>
    <div class="controls">
        <button onclick="resetView()">–°–±—Ä–æ—Å</button>
        <button onclick="centerView()">–¶–µ–Ω—Ç—Ä</button>
        <span style="color: #8b949e; margin-left: 12px;">–ö–æ–ª–µ—Å–æ –º—ã—à–∏ - –∑—É–º | –õ–ö–ú - –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ</span>
    </div>
    
    <div class="zoom-info">
        –ó—É–º: <span id="zoomLevel">100%</span>
    </div>
    
    <div id="viewport">
        <div id="canvas"></div>
    </div>

    <script>
        const compatibility = {
            'modular-arch,monolith-arch': '–Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ',
            'all-blocks,mixed-model': '–Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ',
            'uuid-v4,uuid-v7': '–ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å',
            'yjs-crdt,automerge-crdt': '–ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å',
            'json-storage,sqlite-storage': '–ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å',
            'json-storage,hybrid-storage': '–æ–±—ä–µ–¥–∏–Ω–∏—Ç—å',
            'sqlite-storage,hybrid-storage': '–æ–±—ä–µ–¥–∏–Ω–∏—Ç—å',
            'declarative-ui,imperative-ui': '–Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ'
        };

        const nodes = [
            {
                id: 'arch-question', x: 1000, y: 100, type: 'question',
                title: '‚ùì –ö–∞–∫—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –≤—ã–±—Ä–∞—Ç—å?',
                description: '–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å –¥–≤–∏–∂–∫–∞ - —è–¥—Ä–æ –æ—Ç–¥–µ–ª–µ–Ω–æ –æ—Ç UI',
                details: '–í–∞—Ä–∏–∞–Ω—Ç—ã: –ú–æ–¥—É–ª—å–Ω–∞—è | –ú–æ–Ω–æ–ª–∏—Ç–Ω–∞—è',
                children: ['modular-arch', 'monolith-arch']
            },
            {
                id: 'modular-arch', x: 700, y: 300, type: 'critical',
                title: '‚úÖ –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞',
                description: '–Ø–¥—Ä–æ –ª–µ–≥–∫–æ –æ—Ç–¥–µ–ª—è–µ—Ç—Å—è –æ—Ç UI –∏ –ø–ª–∞–≥–∏–Ω–æ–≤',
                details: '‚ûï –õ–µ–≥–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ ‚ûñ –°–ª–æ–∂–Ω–æ—Å—Ç—å',
                children: []
            },
            {
                id: 'monolith-arch', x: 1300, y: 300, type: 'rejected',
                title: '‚ùå –ú–æ–Ω–æ–ª–∏—Ç–Ω–∞—è',
                description: '–í—Å—ë –≤ –æ–¥–Ω–æ–º –º–æ–¥—É–ª–µ',
                details: '‚ûï –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç ‚ûñ –°–ø–∞–≥–µ—Ç—Ç–∏-–∫–æ–¥',
                children: []
            },
            {
                id: 'blocks-question', x: 2500, y: 100, type: 'question',
                title: '‚ùì –ë–ª–æ—á–Ω–∞—è –º–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö?',
                description: '–í—Å—ë —è–≤–ª—è–µ—Ç—Å—è –±–ª–æ–∫–∞–º–∏ —Å –µ–¥–∏–Ω–æ–π –º–æ–¥–µ–ª—å—é',
                details: '–í–∞—Ä–∏–∞–Ω—Ç—ã: –í—Å—ë –±–ª–æ–∫–∏ | –°–º–µ—à–∞–Ω–Ω–∞—è –º–æ–¥–µ–ª—å',
                children: ['all-blocks', 'mixed-model']
            },
            {
                id: 'all-blocks', x: 2200, y: 300, type: 'critical',
                title: '‚úÖ –í—Å—ë - –±–ª–æ–∫–∏',
                description: '–ï–¥–∏–Ω–∞—è –º–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤',
                details: '‚ûï –ï–¥–∏–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ ‚ûñ –°–ª–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–æ—Å—Ç—ã—Ö —Å–ª—É—á–∞–µ–≤',
                children: []
            },
            {
                id: 'mixed-model', x: 2800, y: 300, type: 'rejected',
                title: '‚ùå –°–º–µ—à–∞–Ω–Ω–∞—è –º–æ–¥–µ–ª—å',
                description: '–ë–ª–æ–∫–∏ + –æ—Å–æ–±—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏',
                details: '‚ûï –ü—Ä–æ—Å—Ç–æ—Ç–∞ ‚ûñ –õ–æ–º–∞—é—Ç—Å—è refs, –ø–æ–∏—Å–∫',
                children: []
            },
            {
                id: 'uuid-question', x: 4000, y: 100, type: 'question',
                title: '‚ùì UUID v4 –∏–ª–∏ v7?',
                description: '–£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã –±–ª–æ–∫–æ–≤',
                details: '–í–∞—Ä–∏–∞–Ω—Ç—ã: UUID v4 | UUID v7',
                children: ['uuid-v4', 'uuid-v7']
            },
            {
                id: 'uuid-v4', x: 3700, y: 300, type: 'critical',
                title: 'üé≤ UUID v4',
                description: '–°–ª—É—á–∞–π–Ω—ã–µ UUID',
                details: '‚ûï –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –≤—Ä–µ–º–µ–Ω–µ–º ‚ûñ –ù–µ—Ç —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –ø–æ –≤—Ä–µ–º–µ–Ω–∏',
                children: []
            },
            {
                id: 'uuid-v7', x: 4300, y: 300, type: 'important',
                title: '‚è∞ UUID v7',
                description: 'UUID —Å timestamp',
                details: '‚ûï –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ ‚ûñ –ù–æ–≤—ã–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç',
                children: []
            },
            {
                id: 'crdt-question', x: 1000, y: 600, type: 'question',
                title: '‚ùì –ö–∞–∫—É—é CRDT –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?',
                description: 'Single source of truth –¥–ª—è –∫–æ–ª–ª–∞–±–æ—Ä–∞—Ü–∏–∏',
                details: '–í–∞—Ä–∏–∞–Ω—Ç—ã: Yjs | Automerge',
                children: ['yjs-crdt', 'automerge-crdt']
            },
            {
                id: 'yjs-crdt', x: 700, y: 800, type: 'critical',
                title: '‚úÖ Yjs',
                description: '–ë—ã—Å—Ç—Ä–∞—è, –ø–æ–ø—É–ª—è—Ä–Ω–∞—è CRDT',
                details: '‚ûï –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, WebRTC ‚ûñ –°–ª–æ–∂–Ω–æ—Å—Ç—å API',
                children: []
            },
            {
                id: 'automerge-crdt', x: 1300, y: 800, type: 'important',
                title: '‚ö° Automerge',
                description: '–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è CRDT',
                details: '‚ûï –ü—Ä–æ—Å—Ç–æ—Ç–∞ API ‚ûñ –ú–µ–¥–ª–µ–Ω–Ω–µ–µ Yjs',
                children: []
            },
            {
                id: 'storage-question', x: 2500, y: 600, type: 'question',
                title: '‚ùì –ö–∞–∫ —Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ?',
                description: '–õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º —Ñ–æ—Ä–º–∞—Ç–µ',
                details: '–í–∞—Ä–∏–∞–Ω—Ç—ã: JSON | SQLite | –ì–∏–±—Ä–∏–¥',
                children: ['json-storage', 'sqlite-storage', 'hybrid-storage']
            },
            {
                id: 'json-storage', x: 2000, y: 800, type: 'critical',
                title: '‚úÖ JSON —Ñ–∞–π–ª—ã',
                description: '–ß–µ–ª–æ–≤–µ–∫–æ—á–∏—Ç–∞–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç',
                details: '‚ûï –ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å, —Å–∫—Ä–∏–ø—Ç—ã ‚ûñ –ú–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã',
                children: []
            },
            {
                id: 'sqlite-storage', x: 2500, y: 800, type: 'important',
                title: '‚ö° SQLite',
                description: '–†–µ–ª—è—Ü–∏–æ–Ω–Ω–∞—è –ë–î',
                details: '‚ûï –ë—ã—Å—Ç—Ä—ã–µ –∑–∞–ø—Ä–æ—Å—ã ‚ûñ –ù–µ—á–∏—Ç–∞–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç',
                children: []
            },
            {
                id: 'hybrid-storage', x: 3000, y: 800, type: 'flexible',
                title: 'üîÑ –ì–∏–±—Ä–∏–¥–Ω—ã–π',
                description: 'JSON + SQLite –∏–Ω–¥–µ–∫—Å—ã',
                details: '‚ûï –õ—É—á—à–µ–µ –∏–∑ –¥–≤—É—Ö –º–∏—Ä–æ–≤ ‚ûñ –°–ª–æ–∂–Ω–æ—Å—Ç—å',
                children: []
            },
            {
                id: 'ui-question', x: 4000, y: 600, type: 'question',
                title: '‚ùì –î–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω—ã–π UI?',
                description: '100% –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä',
                details: '–í–∞—Ä–∏–∞–Ω—Ç—ã: –î–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω—ã–π | –ò–º–ø–µ—Ä–∞—Ç–∏–≤–Ω—ã–π',
                children: ['declarative-ui', 'imperative-ui']
            },
            {
                id: 'declarative-ui', x: 3700, y: 800, type: 'critical',
                title: '‚úÖ –î–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω—ã–π',
                description: 'JSON-—Å—Ç—Ä—É–∫—Ç—É—Ä—ã, —á–∏—Å—Ç—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏',
                details: '‚ûï –ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç—å, –æ—Ç–ª–∞–¥–∫–∞ ‚ûñ –°–ª–æ–∂–Ω–æ—Å—Ç—å',
                children: []
            },
            {
                id: 'imperative-ui', x: 4300, y: 800, type: 'rejected',
                title: '‚ùå –ò–º–ø–µ—Ä–∞—Ç–∏–≤–Ω—ã–π',
                description: '–û–±—ã—á–Ω—ã–π –∫–æ–¥ —Å –º—É—Ç–∞—Ü–∏—è–º–∏',
                details: '‚ûï –ü—Ä–æ—Å—Ç–æ—Ç–∞ ‚ûñ –ù–µ–æ–±—ä—è—Å–Ω–∏–º—ã–µ –±–∞–≥–∏',
                children: []
            }
        ];

        let scale = 0.3;
        let translateX = 200;
        let translateY = 50;
        let isDragging = false;
        let lastMouseX = 0;
        let lastMouseY = 0;

        function createNode(node) {
            const div = document.createElement('div');
            div.className = `node ${node.type}`;
            div.style.left = node.x + 'px';
            div.style.top = node.y + 'px';
            
            const badge = node.type === 'critical' ? '–ö–†–ò–¢–ò–ß–ù–û' : 
                         node.type === 'important' ? '–í–ê–ñ–ù–û' : 
                         node.type === 'flexible' ? '–ì–ò–ë–ö–û' :
                         node.type === 'question' ? '–í–û–ü–†–û–°' : '–û–¢–ö–õ–û–ù–ï–ù–û';
            
            div.innerHTML = `
                <div class="badge ${node.type}">${badge}</div>
                <h3>${node.title}</h3>
                <p>${node.description}</p>
                <div class="details">${node.details}</div>
            `;
            
            return div;
        }

        function createConnection(from, to, type) {
            const line = document.createElement('div');
            line.className = `connection ${type}`;
            
            const dx = to.x - from.x;
            const dy = to.y - from.y;
            const length = Math.sqrt(dx * dx + dy * dy);
            const angle = Math.atan2(dy, dx) * 180 / Math.PI;
            
            line.style.left = (from.x + 160) + 'px';
            line.style.top = (from.y + 60) + 'px';
            line.style.width = length + 'px';
            line.style.transform = `rotate(${angle}deg)`;
            
            return line;
        }

        function createCompatibilityLine(node1, node2, compatibility) {
            const line = document.createElement('div');
            line.className = 'compatibility-line';
            line.style.position = 'absolute';
            line.style.height = '2px';
            line.style.background = compatibility === '–æ–±—ä–µ–¥–∏–Ω–∏—Ç—å' ? '#3fb950' : 
                                   compatibility === '–ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å' ? '#f79009' : '#f85149';
            line.style.opacity = '0.6';
            line.style.zIndex = '-2';
            
            const startX = Math.min(node1.x, node2.x) + 160;
            const endX = Math.max(node1.x, node2.x) + 160;
            const y = node1.y + 60;
            
            line.style.left = startX + 'px';
            line.style.top = y + 'px';
            line.style.width = (endX - startX) + 'px';
            
            const label = document.createElement('div');
            label.style.position = 'absolute';
            label.style.left = ((endX - startX) / 2 - 30) + 'px';
            label.style.top = '-20px';
            label.style.fontSize = '10px';
            label.style.color = '#8b949e';
            label.style.background = '#0d1117';
            label.style.padding = '2px 6px';
            label.style.borderRadius = '4px';
            label.style.whiteSpace = 'nowrap';
            label.textContent = compatibility;
            
            line.appendChild(label);
            return line;
        }

        function initCanvas() {
            const canvas = document.getElementById('canvas');
            const nodeMap = {};
            
            nodes.forEach(node => {
                const nodeEl = createNode(node);
                canvas.appendChild(nodeEl);
                nodeMap[node.id] = node;
            });
            
            nodes.forEach(node => {
                if (node.children) {
                    node.children.forEach(childId => {
                        const child = nodeMap[childId];
                        if (child) {
                            const connection = createConnection(node, child, node.type);
                            canvas.appendChild(connection);
                        }
                    });
                }
            });
            
            Object.keys(compatibility).forEach(key => {
                const [id1, id2] = key.split(',');
                const node1 = nodeMap[id1];
                const node2 = nodeMap[id2];
                
                if (node1 && node2) {
                    const compatLine = createCompatibilityLine(node1, node2, compatibility[key]);
                    canvas.appendChild(compatLine);
                }
            });
        }

        function updateTransform() {
            const canvas = document.getElementById('canvas');
            canvas.style.transform = `translate(${translateX}px, ${translateY}px) scale(${scale})`;
            document.getElementById('zoomLevel').textContent = Math.round(scale * 100) + '%';
        }

        function resetView() {
            scale = 0.3;
            translateX = 200;
            translateY = 50;
            updateTransform();
        }

        function centerView() {
            translateX = 200;
            translateY = 50;
            updateTransform();
        }

        const viewport = document.getElementById('viewport');

        viewport.addEventListener('wheel', (e) => {
            e.preventDefault();
            
            const rect = viewport.getBoundingClientRect();
            const mouseX = e.clientX - rect.left;
            const mouseY = e.clientY - rect.top;
            
            const delta = e.deltaY > 0 ? 0.9 : 1.1;
            const newScale = Math.max(0.1, Math.min(3, scale * delta));
            
            const canvasX = (mouseX - translateX) / scale;
            const canvasY = (mouseY - translateY) / scale;
            
            scale = newScale;
            
            translateX = mouseX - canvasX * scale;
            translateY = mouseY - canvasY * scale;
            
            updateTransform();
        });

        viewport.addEventListener('mousedown', (e) => {
            if (e.button === 0) {
                isDragging = true;
                lastMouseX = e.clientX;
                lastMouseY = e.clientY;
                viewport.classList.add('dragging');
            }
        });

        document.addEventListener('mousemove', (e) => {
            if (isDragging) {
                const deltaX = e.clientX - lastMouseX;
                const deltaY = e.clientY - lastMouseY;
                translateX += deltaX;
                translateY += deltaY;
                lastMouseX = e.clientX;
                lastMouseY = e.clientY;
                updateTransform();
            }
        });

        document.addEventListener('mouseup', () => {
            isDragging = false;
            viewport.classList.remove('dragging');
        });

        initCanvas();
        updateTransform();
    </script>
</body>
</html>