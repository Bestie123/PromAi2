{
  "version": "2.0.0",
  "lastUpdated": "2024-12-19T15:00:00Z",
  "modules": {
    "MODULE_Core_VER_1": {
      "path": "./src/core/",
      "description": "Core block system and CRDT operations",
      "dependencies": [],
      "exports": [
        "FUNC_createBlock_1",
        "FUNC_updateBlock_1", 
        "FUNC_deleteBlock_1",
        "FUNC_addReference_1",
        "FUNC_removeReference_1"
      ],
      "status": "planned",
      "phase": 1,
      "priority": "critical",
      "criteria": [1, 2, 3],
      "estimatedWeeks": 6,
      "enables": ["MODULE_UI_VER_1", "MODULE_Plugin_VER_1", "MODULE_Search_VER_1"],
      "blocks": []
    },
    "MODULE_CRDT_VER_1": {
      "path": "./src/crdt/",
      "description": "CRDT implementation and conflict resolution",
      "dependencies": [],
      "exports": [
        "FUNC_applyOperation_1",
        "FUNC_mergeOperations_1",
        "FUNC_resolveConflict_1"
      ],
      "status": "planned",
      "phase": 1,
      "priority": "critical",
      "criteria": [13],
      "estimatedWeeks": 4,
      "enables": ["MODULE_Storage_VER_1"],
      "blocks": [],
      "risk": "high",
      "mitigation": "Прототип CRDT операций в первую неделю"
    },
    "MODULE_Storage_VER_1": {
      "path": "./src/storage/",
      "description": "Local storage and event sourcing",
      "dependencies": ["MODULE_CRDT_VER_1"],
      "exports": [
        "FUNC_saveBlock_1",
        "FUNC_loadBlocks_1",
        "FUNC_createSnapshot_1"
      ],
      "status": "planned",
      "phase": 3,
      "priority": "important",
      "criteria": [9, 10, 16],
      "estimatedWeeks": 3,
      "enables": [],
      "blocks": ["MODULE_CRDT_VER_1"]
    },
    "MODULE_UI_VER_1": {
      "path": "./src/ui/",
      "description": "Declarative UI renderer and virtual scrolling",
      "dependencies": ["MODULE_Core_VER_1"],
      "exports": [
        "FUNC_renderBlock_1",
        "FUNC_virtualScroll_1",
        "FUNC_handleDragDrop_1"
      ],
      "status": "planned",
      "phase": 2,
      "priority": "critical",
      "criteria": [11, 12, 21],
      "estimatedWeeks": 5,
      "enables": ["MODULE_Plugin_VER_1"],
      "blocks": ["MODULE_Core_VER_1"],
      "risk": "high",
      "mitigation": "Benchmark с 100k блоков"
    },
    "MODULE_Plugin_VER_1": {
      "path": "./src/plugins/",
      "description": "Plugin system and sandbox",
      "dependencies": ["MODULE_Core_VER_1", "MODULE_UI_VER_1"],
      "exports": [
        "FUNC_loadPlugin_1",
        "FUNC_executePlugin_1",
        "FUNC_sandboxPlugin_1"
      ],
      "status": "planned",
      "phase": 3,
      "priority": "critical",
      "criteria": [26, 27, 28],
      "estimatedWeeks": 5,
      "enables": [],
      "blocks": ["MODULE_Core_VER_1", "MODULE_UI_VER_1"],
      "risk": "high",
      "mitigation": "Sandbox прототип"
    },
    "MODULE_Search_VER_1": {
      "path": "./src/search/",
      "description": "Full-text search and indexing in Web Workers",
      "dependencies": ["MODULE_Core_VER_1"],
      "exports": [
        "FUNC_indexBlock_1",
        "FUNC_searchBlocks_1",
        "FUNC_updateIndex_1"
      ],
      "status": "planned",
      "phase": 4,
      "priority": "important",
      "criteria": [22],
      "estimatedWeeks": 3,
      "enables": [],
      "blocks": ["MODULE_Core_VER_1"]
    }
  },
  "constraints": {
    "maxFileLines": 500,
    "maxFunctionLines": 50,
    "maxParameters": 3,
    "circularDependencies": "forbidden"
  },
  "developmentPhases": {
    "phase1_foundation": {
      "order": 1,
      "name": "Foundation",
      "description": "Несущие стены архитектуры",
      "weeks": 10,
      "parallel": false,
      "modules": ["MODULE_Core_VER_1", "MODULE_CRDT_VER_1"],
      "criteria": [1, 2, 3, 13],
      "deliverables": ["Block schema", "CRDT operations", "UUID system", "Modular structure"]
    },
    "phase2_core": {
      "order": 2,
      "name": "Core",
      "description": "Основная функциональность",
      "weeks": 6,
      "parallel": true,
      "modules": ["MODULE_UI_VER_1"],
      "criteria": [11, 12, 4, 7, 8],
      "dependsOn": ["phase1_foundation"],
      "deliverables": ["Declarative UI", "Render system", "Refs system"]
    },
    "phase3_features": {
      "order": 3,
      "name": "Features",
      "description": "Ключевые возможности",
      "weeks": 8,
      "parallel": true,
      "modules": ["MODULE_Storage_VER_1", "MODULE_Plugin_VER_1"],
      "criteria": [16, 21, 26, 9, 10],
      "dependsOn": ["phase2_core"],
      "deliverables": ["Virtual scrolling", "Plugin system", "Storage system"]
    },
    "phase4_polish": {
      "order": 4,
      "name": "Polish",
      "description": "Доводка и оптимизация",
      "weeks": 10,
      "parallel": true,
      "modules": ["MODULE_Search_VER_1"],
      "criteria": [14, 15, 17, 18, 19, 20, 22, 23, 24, 25, 27, 28, 29],
      "dependsOn": ["phase3_features"],
      "deliverables": ["Event sourcing", "Schema validation", "E2EE ready", "Production ready"]
    }
  }
}