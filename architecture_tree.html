<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PromAi Architecture Decision Tree</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            background: #0d1117; 
            color: #c9d1d9; 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            overflow: hidden;
        }
        #canvas { 
            width: 100vw; 
            height: 100vh; 
            cursor: grab; 
            position: relative;
        }
        #canvas:active { cursor: grabbing; }
        .node {
            position: absolute;
            background: #21262d;
            border: 2px solid #30363d;
            border-radius: 8px;
            padding: 12px;
            min-width: 200px;
            max-width: 300px;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }
        .node:hover {
            border-color: #58a6ff;
            transform: scale(1.02);
            z-index: 100;
        }
        .node.critical { border-color: #f85149; }
        .node.flexible { border-color: #3fb950; }
        .node.warning { border-color: #d29922; }
        
        .badge {
            display: inline-block;
            padding: 2px 6px;
            border-radius: 12px;
            font-size: 10px;
            font-weight: bold;
            margin-bottom: 8px;
        }
        .badge.critical { background: #f85149; color: white; }
        .badge.flexible { background: #3fb950; color: white; }
        .badge.warning { background: #d29922; color: black; }
        
        .node-title {
            font-weight: bold;
            font-size: 14px;
            margin-bottom: 6px;
            color: #f0f6fc;
        }
        .node-desc {
            font-size: 11px;
            color: #8b949e;
            margin-bottom: 8px;
            line-height: 1.3;
        }
        .node-impact {
            font-size: 10px;
            color: #7c3aed;
            border-top: 1px solid #30363d;
            padding-top: 6px;
        }
        
        .connection {
            position: absolute;
            height: 2px;
            background: #30363d;
            transform-origin: left center;
            z-index: 1;
        }
        .connection.critical { background: #f85149; }
        .connection.flexible { background: #3fb950; }
        
        .controls {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            background: #21262d;
            padding: 10px;
            border-radius: 6px;
            border: 1px solid #30363d;
        }
        .btn {
            background: #238636;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            margin: 2px;
            font-size: 12px;
        }
        .btn:hover { background: #2ea043; }
        
        .tooltip {
            position: fixed;
            background: #1c2128;
            border: 1px solid #30363d;
            border-radius: 6px;
            padding: 12px;
            max-width: 400px;
            z-index: 1001;
            font-size: 12px;
            line-height: 1.4;
            box-shadow: 0 8px 24px rgba(0,0,0,0.5);
            display: none;
        }
    </style>
</head>
<body>
    <div id="canvas"></div>
    
    <div class="controls">
        <button class="btn" onclick="resetView()">Reset View</button>
        <button class="btn" onclick="zoomIn()">Zoom In</button>
        <button class="btn" onclick="zoomOut()">Zoom Out</button>
    </div>
    
    <div id="tooltip" class="tooltip"></div>

    <script>
        const canvas = document.getElementById('canvas');
        const tooltip = document.getElementById('tooltip');
        
        let scale = 1;
        let translateX = 0;
        let translateY = 0;
        let isDragging = false;
        let lastX = 0;
        let lastY = 0;

        const decisions = {
            root: {
                title: "PromAi Architecture",
                desc: "PKM —Å–∏—Å—Ç–µ–º–∞ —Å –±–ª–æ—á–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π",
                impact: "–§—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç –≤—Å—é —ç–∫–æ—Å–∏—Å—Ç–µ–º—É",
                type: "critical",
                x: 2500, y: 100,
                children: ["crdt", "ui", "storage", "plugins"]
            },
            
            crdt: {
                title: "CRDT Library",
                desc: "–í—ã–±–æ—Ä CRDT –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –¥–ª—è –∫–æ–ª–ª–∞–±–æ—Ä–∞—Ü–∏–∏",
                impact: "–ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –±–µ–∑ –ø–æ–ª–Ω–æ–π –ø–µ—Ä–µ–ø–∏—Å–∫–∏ –¥–∞–Ω–Ω—ã—Ö",
                type: "critical",
                x: 2000, y: 400,
                children: ["yjs", "automerge"],
                details: "–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö, –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, —Ä–∞–∑–º–µ—Ä –±–∞–Ω–¥–ª–∞"
            },
            
            yjs: {
                title: "Yjs",
                desc: "–ë—ã—Å—Ç—Ä–∞—è CRDT –±–∏–±–ª–∏–æ—Ç–µ–∫–∞",
                impact: "–í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –º–µ–Ω—å—à–∏–π —Ä–∞–∑–º–µ—Ä, –∞–∫—Ç–∏–≤–Ω–æ–µ —Å–æ–æ–±—â–µ—Å—Ç–≤–æ. –ù–æ –º–µ–Ω–µ–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è",
                type: "flexible",
                x: 1700, y: 600
            },
            
            automerge: {
                title: "Automerge",
                desc: "–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è CRDT —Å immutable –¥–∞–Ω–Ω—ã–º–∏",
                impact: "–ë–æ–ª–µ–µ —á–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞, –ª—É—á—à–µ –¥–ª—è –∞—É–¥–∏—Ç–∞. –ù–æ –º–µ–¥–ª–µ–Ω–Ω–µ–µ –∏ –±–æ–ª—å—à–µ —Ä–∞–∑–º–µ—Ä",
                type: "flexible", 
                x: 2300, y: 600
            },
            
            ui: {
                title: "UI Framework",
                desc: "–§—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ UI",
                impact: "–í–ª–∏—è–µ—Ç –Ω–∞ —ç–∫–æ—Å–∏—Å—Ç–µ–º—É –ø–ª–∞–≥–∏–Ω–æ–≤ –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å",
                type: "flexible",
                x: 2500, y: 400,
                children: ["react", "svelte", "vanilla"],
                details: "–î–æ–ª–∂–µ–Ω –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω–æ—Å—Ç—å –∏ zero runtime logic"
            },
            
            react: {
                title: "React",
                desc: "–ü–æ–ø—É–ª—è—Ä–Ω—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ —Å –±–æ–ª—å—à–æ–π —ç–∫–æ—Å–∏—Å—Ç–µ–º–æ–π",
                impact: "–ú–Ω–æ–≥–æ –≥–æ—Ç–æ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤, –Ω–æ –±–æ–ª—å—à–µ overhead. –õ–µ–≥—á–µ –Ω–∞–π—Ç–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤",
                type: "flexible",
                x: 2200, y: 600
            },
            
            svelte: {
                title: "Svelte",
                desc: "–ö–æ–º–ø–∏–ª–∏—Ä—É–µ–º—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –±–µ–∑ runtime",
                impact: "–ò–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è zero runtime logic. –ú–µ–Ω—å—à–µ —Ä–∞–∑–º–µ—Ä, –Ω–æ –º–µ–Ω—å—à–µ —ç–∫–æ—Å–∏—Å—Ç–µ–º–∞",
                type: "flexible",
                x: 2500, y: 600
            },
            
            vanilla: {
                title: "Vanilla JS",
                desc: "–ß–∏—Å—Ç—ã–π JavaScript –±–µ–∑ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤",
                impact: "–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å, –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä. –ù–æ –±–æ–ª—å—à–µ –∫–æ–¥–∞ –∏ —Å–ª–æ–∂–Ω–µ–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∞",
                type: "flexible",
                x: 2800, y: 600
            },
            
            storage: {
                title: "Data Storage",
                desc: "–§–æ—Ä–º–∞—Ç –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö",
                impact: "–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å",
                type: "flexible",
                x: 3000, y: 400,
                children: ["json", "sqlite"],
                details: "–î–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ—Ç–∫—Ä—ã—Ç—ã–º –∏ —á–∏—Ç–∞–µ–º—ã–º"
            },
            
            json: {
                title: "JSON Files",
                desc: "–ü—Ä–æ—Å—Ç—ã–µ JSON —Ñ–∞–π–ª—ã",
                impact: "–õ–µ–≥–∫–æ —á–∏—Ç–∞—Ç—å/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å, –ø—Ä–æ—Å—Ç—ã–µ –±—ç–∫–∞–ø—ã. –ù–æ –º–µ–¥–ª–µ–Ω–Ω–µ–µ –¥–ª—è –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤",
                type: "flexible",
                x: 2900, y: 600
            },
            
            sqlite: {
                title: "SQLite",
                desc: "–í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è SQL –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö",
                impact: "–ë—ã—Å—Ç—Ä—ã–µ –∑–∞–ø—Ä–æ—Å—ã, –∏–Ω–¥–µ–∫—Å—ã, —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏. –ù–æ —Å–ª–æ–∂–Ω–µ–µ –±—ç–∫–∞–ø—ã –∏ –º–∏–≥—Ä–∞—Ü–∏–∏",
                type: "flexible",
                x: 3100, y: 600
            },
            
            plugins: {
                title: "Plugin System",
                desc: "–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã –ø–ª–∞–≥–∏–Ω–æ–≤",
                impact: "–ö—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ —Ä–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç–∏",
                type: "critical",
                x: 3500, y: 400,
                children: ["workers", "iframe", "capability"],
                details: "–î–æ–ª–∂–Ω–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞—Ç—å –∏–∑–æ–ª—è—Ü–∏—é –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å"
            },
            
            workers: {
                title: "Web Workers",
                desc: "–ò–∑–æ–ª—è—Ü–∏—è —á–µ—Ä–µ–∑ Web Workers",
                impact: "–•–æ—Ä–æ—à–∞—è –∏–∑–æ–ª—è—Ü–∏—è, –Ω–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ DOM. –°–ª–æ–∂–Ω–µ–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞–≥–∏–Ω–æ–≤",
                type: "warning",
                x: 3200, y: 600
            },
            
            iframe: {
                title: "Iframe Sandbox",
                desc: "–ò–∑–æ–ª—è—Ü–∏—è —á–µ—Ä–µ–∑ iframe —Å sandbox",
                impact: "–ü–æ–ª–Ω–∞—è –∏–∑–æ–ª—è—Ü–∏—è, –¥–æ—Å—Ç—É–ø –∫ DOM. –ù–æ –±–æ–ª—å—à–µ overhead –∏ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ —Å –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–µ–π",
                type: "warning",
                x: 3500, y: 600
            },
            
            capability: {
                title: "Capability-based",
                desc: "–°–∏—Å—Ç–µ–º–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π –Ω–∞ –æ—Å–Ω–æ–≤–µ capabilities",
                impact: "–ì–∏–±–∫–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å, –Ω–æ —Å–ª–æ–∂–Ω–µ–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è. –ù—É–∂–Ω–æ –ø—Ä–æ–¥—É–º–∞—Ç—å API",
                type: "flexible",
                x: 3800, y: 600
            }
        };

        function createNode(id, data) {
            const node = document.createElement('div');
            node.className = `node ${data.type}`;
            node.style.left = data.x + 'px';
            node.style.top = data.y + 'px';
            
            const badge = data.type === 'critical' ? '–ö–†–ò–¢–ò–ß–ù–û' : 
                         data.type === 'warning' ? '–û–°–¢–û–†–û–ñ–ù–û' : '–ì–ò–ë–ö–û';
            
            node.innerHTML = `
                <div class="badge ${data.type}">${badge}</div>
                <div class="node-title">${data.title}</div>
                <div class="node-desc">${data.desc}</div>
                <div class="node-impact">üí° ${data.impact}</div>
            `;
            
            node.addEventListener('mouseenter', (e) => {
                if (data.details) {
                    tooltip.innerHTML = `<strong>${data.title}</strong><br><br>${data.details}<br><br><em>–í–ª–∏—è–Ω–∏–µ:</em> ${data.impact}`;
                    tooltip.style.display = 'block';
                    tooltip.style.left = e.pageX + 10 + 'px';
                    tooltip.style.top = e.pageY + 10 + 'px';
                }
            });
            
            node.addEventListener('mouseleave', () => {
                tooltip.style.display = 'none';
            });
            
            return node;
        }

        function createConnection(from, to, type) {
            const connection = document.createElement('div');
            connection.className = `connection ${type}`;
            
            const dx = to.x - from.x;
            const dy = to.y - from.y;
            const length = Math.sqrt(dx * dx + dy * dy);
            const angle = Math.atan2(dy, dx) * 180 / Math.PI;
            
            connection.style.left = (from.x + 150) + 'px';
            connection.style.top = (from.y + 50) + 'px';
            connection.style.width = length + 'px';
            connection.style.transform = `rotate(${angle}deg)`;
            
            return connection;
        }

        function renderTree() {
            canvas.innerHTML = '';
            
            // –°–æ–∑–¥–∞–µ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
            Object.entries(decisions).forEach(([id, data]) => {
                if (data.children) {
                    data.children.forEach(childId => {
                        const child = decisions[childId];
                        const connection = createConnection(data, child, data.type);
                        canvas.appendChild(connection);
                    });
                }
            });
            
            // –°–æ–∑–¥–∞–µ–º —É–∑–ª—ã
            Object.entries(decisions).forEach(([id, data]) => {
                const node = createNode(id, data);
                canvas.appendChild(node);
            });
        }

        function updateTransform() {
            canvas.style.transform = `translate(${translateX}px, ${translateY}px) scale(${scale})`;
        }

        // Zoom and pan
        canvas.addEventListener('wheel', (e) => {
            e.preventDefault();
            const delta = e.deltaY > 0 ? 0.9 : 1.1;
            scale = Math.max(0.1, Math.min(3, scale * delta));
            updateTransform();
        });

        canvas.addEventListener('mousedown', (e) => {
            if (e.target === canvas) {
                isDragging = true;
                lastX = e.clientX;
                lastY = e.clientY;
            }
        });

        document.addEventListener('mousemove', (e) => {
            if (isDragging) {
                translateX += e.clientX - lastX;
                translateY += e.clientY - lastY;
                lastX = e.clientX;
                lastY = e.clientY;
                updateTransform();
            }
        });

        document.addEventListener('mouseup', () => {
            isDragging = false;
        });

        function resetView() {
            scale = 1;
            translateX = -2000;
            translateY = 0;
            updateTransform();
        }

        function zoomIn() {
            scale = Math.min(3, scale * 1.2);
            updateTransform();
        }

        function zoomOut() {
            scale = Math.max(0.1, scale / 1.2);
            updateTransform();
        }

        // Initialize
        renderTree();
        resetView();
    </script>
</body>
</html>